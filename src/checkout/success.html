<!doctype html>
<html lang="en">
  <!-- <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order Success | Sleep Outside</title>
    <link rel="stylesheet" href="../css/style.css" />
    <script src="../js/utils.mjs" type="module"></script>
    <script src="../js/renderHeaderFooter.js" defer></script>
  </head> -->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sleep Outside | Cart</title>
    <link rel="stylesheet" href="../css/style.css" />
    <script type="module" src="../js/renderHeaderFooter.js"></script>
  </head>
  <body>
    <header class="divider" id="main-header"></header>
    <main id="divider">
      <section id="products">
        <h2 class="orderSuccess">Order Placed Successfully!</h2>
        <div id="orderDetails">
          <!-- Order details will be dynamically inserted here -->
        </div>
        <a class="continue-shopping" href="../index.html">Continue Shopping</a>
      </section>
    </main>
    <footer id="main-footer"></footer>
    <script type="module">
      import { getLocalStorage } from "../js/utils.mjs";

      const orders = getLocalStorage("so-orders") || [];
      const latestOrder = orders[orders.length - 1];

      if (latestOrder) {
        const orderDetails = document.getElementById("orderDetails");
        orderDetails.innerHTML = `
          <h3>Order Details</h3>
          <p><strong>Order Date:</strong> ${new Date(latestOrder.orderDate).toLocaleString()}</p>
          <p><strong>Name:</strong> ${latestOrder.fname} ${latestOrder.lname}</p>
          <p><strong>Address:</strong> ${latestOrder.street}, ${latestOrder.city}, ${latestOrder.state} ${latestOrder.zip}</p>
          <h4>Items Ordered:</h4>
          <ul>
            ${latestOrder.items.map((item) => `
              <li>${item.name} - $${item.price.toFixed(2)} x ${item.quantity}</li>
            `).join("")}
          </ul>
          <p><strong>Subtotal:</strong> $${latestOrder.orderTotal}</p>
          <p><strong>Tax:</strong> $${latestOrder.tax}</p>
          <p><strong>Shipping:</strong> $${latestOrder.shipping}</p>
          <p><strong>Total:</strong> $${latestOrder.orderTotal}</p>
        `;
      } else {
        document.getElementById("orderDetails").innerHTML = `<p>No order details found.</p>`;
      }
    </script>
  </body>
</html>